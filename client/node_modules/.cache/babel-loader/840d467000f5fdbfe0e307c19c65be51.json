{"ast":null,"code":"var _jsxFileName = \"/Users/j/Desktop/Capstone/dog-pool/client/src/pages/ProfilePage/ProfilePage.jsx\";\nimport { API_URL } from \"../../App\";\nimport \"./ProfilePage.scss\";\nimport { Component } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport Header from \"../../components/Header/Header\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass ProfilePage extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      user: null,\n      dog: null,\n      failedAuth: false\n    };\n\n    this.handleLogout = () => {\n      sessionStorage.removeItem(\"token\");\n      this.setState({\n        user: null,\n        failedAuth: true\n      });\n    };\n\n    this.addDogToPool = () => {\n      //console.log(this.state.dog);\n      //console.log(this.state.user);\n      const {\n        owner_id,\n        dog_name,\n        photo\n      } = this.state.dog;\n      const {\n        first_name,\n        last_name,\n        email,\n        phone_number,\n        address,\n        city\n      } = this.state.user;\n      const dogToPool = {\n        owner_id,\n        dog_name,\n        photo,\n        first_name,\n        last_name,\n        email,\n        phone_number,\n        address,\n        city\n      };\n      axios.post(API_URL + \"/pool\", dogToPool).then(res => {}).catch(err => console.log(err));\n    };\n\n    this.removeFromPool = () => {\n      const {\n        owner_id,\n        dog_name,\n        photo\n      } = this.state.dog;\n      const {\n        first_name,\n        last_name,\n        email,\n        phone_number,\n        address,\n        city\n      } = this.state.user;\n      const dogToRemove = {\n        owner_id,\n        dog_name,\n        photo,\n        first_name,\n        last_name,\n        email,\n        phone_number,\n        address,\n        city\n      };\n      console.log(dogToRemove);\n      axios.delete(API_URL + \"/pool\", dogToRemove).then(res => {}).catch(err => console.log(err));\n    };\n  }\n\n  componentDidMount() {\n    const token = sessionStorage.getItem(\"token\");\n\n    if (!token) {\n      this.setState({\n        failedAuth: true\n      });\n      return;\n    }\n\n    axios.get(API_URL + \"/current\", {\n      headers: {\n        Authorization: \"Bearer \" + token\n      }\n    }).then(res => {\n      this.setState({\n        user: res.data.user,\n        dog: res.data.dog\n      });\n    }).catch(err => {\n      console.log(err);\n      this.setState({\n        failedAuth: true\n      });\n    });\n  }\n\n  render() {\n    if (this.state.failedAuth) {\n      return /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"profile\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"You must be logged in to see this page.\", \" \", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/login\",\n            children: \"Log in\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this);\n    }\n\n    if (!this.state.user || !this.state.dog) {\n      return /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"profile\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this);\n    }\n\n    const {\n      first_name\n    } = this.state.user;\n    const {\n      dog_name,\n      birthday,\n      dog_info,\n      photo\n    } = this.state.dog;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"profile\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile__welcome\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"\",\n            children: [\"Welcome back, \", first_name, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile__dog\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"dogs name: \", dog_name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"profile__dog-photo\",\n            src: photo,\n            alt: \"dog\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: dog_info\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile__status\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Do you need your dog walked today?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"profile__poolmydog-button\",\n            onClick: this.addDogToPool,\n            children: \"Pool My Dog\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"profile__remove-pool\",\n            onClick: this.removeFromPool,\n            children: \"remove\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"profile__logout\",\n            onClick: this.handleLogout,\n            children: \"Log out\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default ProfilePage;","map":{"version":3,"sources":["/Users/j/Desktop/Capstone/dog-pool/client/src/pages/ProfilePage/ProfilePage.jsx"],"names":["API_URL","Component","axios","Link","Header","ProfilePage","state","user","dog","failedAuth","handleLogout","sessionStorage","removeItem","setState","addDogToPool","owner_id","dog_name","photo","first_name","last_name","email","phone_number","address","city","dogToPool","post","then","res","catch","err","console","log","removeFromPool","dogToRemove","delete","componentDidMount","token","getItem","get","headers","Authorization","data","render","birthday","dog_info"],"mappings":"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","sourcesContent":["import { API_URL } from \"../../App\";\nimport \"./ProfilePage.scss\";\nimport { Component } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport Header from \"../../components/Header/Header\";\n\nclass ProfilePage extends Component {\n  state = {\n    user: null,\n    dog: null,\n    failedAuth: false,\n  };\n\n  componentDidMount() {\n    const token = sessionStorage.getItem(\"token\");\n\n    if (!token) {\n      this.setState({ failedAuth: true });\n      return;\n    }\n\n    axios\n      .get(API_URL + \"/current\", {\n        headers: {\n          Authorization: \"Bearer \" + token,\n        },\n      })\n\n      .then((res) => {\n        this.setState({\n          user: res.data.user,\n          dog: res.data.dog,\n        });\n      })\n      .catch((err) => {\n        console.log(err);\n        this.setState({\n          failedAuth: true,\n        });\n      });\n  }\n\n  handleLogout = () => {\n    sessionStorage.removeItem(\"token\");\n    this.setState({\n      user: null,\n      failedAuth: true,\n    });\n  };\n\n  addDogToPool = () => {\n    //console.log(this.state.dog);\n    //console.log(this.state.user);\n    const { owner_id, dog_name, photo } = this.state.dog;\n    const { first_name, last_name, email, phone_number, address, city } =\n      this.state.user;\n\n    const dogToPool = {\n      owner_id,\n      dog_name,\n      photo,\n      first_name,\n      last_name,\n      email,\n      phone_number,\n      address,\n      city,\n    };\n    axios\n      .post(API_URL + \"/pool\", dogToPool)\n      .then((res) => {})\n      .catch((err) => console.log(err));\n  };\n\n  removeFromPool = () => {\n    const { owner_id, dog_name, photo } = this.state.dog;\n    const { first_name, last_name, email, phone_number, address, city } =\n      this.state.user;\n\n    const dogToRemove = {\n      owner_id,\n      dog_name,\n      photo,\n      first_name,\n      last_name,\n      email,\n      phone_number,\n      address,\n      city,\n    };\n    console.log(dogToRemove);\n    axios\n      .delete(API_URL + \"/pool\", dogToRemove)\n      .then((res) => {})\n      .catch((err) => console.log(err));\n  };\n\n  render() {\n    if (this.state.failedAuth) {\n      return (\n        <main className=\"profile\">\n          <p>\n            You must be logged in to see this page.{\" \"}\n            <Link to=\"/login\">Log in</Link>\n          </p>\n        </main>\n      );\n    }\n\n    if (!this.state.user || !this.state.dog) {\n      return (\n        <main className=\"profile\">\n          <p>Loading...</p>\n        </main>\n      );\n    }\n\n    const { first_name } = this.state.user;\n    const { dog_name, birthday, dog_info, photo } = this.state.dog;\n\n    return (\n      <>\n        <Header />\n        <main className=\"profile\">\n          <div className=\"profile__welcome\">\n            <h1 className=\"\">Welcome back, {first_name} </h1>\n          </div>\n\n          <div className=\"profile__dog\">\n            <p>dogs name: {dog_name}</p>\n            <img className=\"profile__dog-photo\" src={photo} alt=\"dog\" />\n\n            <p>{dog_info}</p>\n          </div>\n\n          <div className=\"profile__status\">\n            <p>Do you need your dog walked today?</p>\n            {/* <Link to=\"/\"> */}\n            <button\n              className=\"profile__poolmydog-button\"\n              onClick={this.addDogToPool}\n            >\n              Pool My Dog\n            </button>\n            {/* </Link> */}\n\n            <button\n              className=\"profile__remove-pool\"\n              onClick={this.removeFromPool}\n            >\n              remove\n            </button>\n          </div>\n\n          <Link to=\"/login\">\n            <button className=\"profile__logout\" onClick={this.handleLogout}>\n              Log out\n            </button>\n          </Link>\n        </main>\n      </>\n    );\n  }\n}\n\nexport default ProfilePage;\n"]},"metadata":{},"sourceType":"module"}