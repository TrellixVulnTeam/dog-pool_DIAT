{"ast":null,"code":"var _jsxFileName = \"/Users/j/Desktop/Capstone/dog-pool/client/src/pages/ProfilePage/ProfilePage.jsx\";\nimport { API_URL } from \"../../App\";\nimport \"./ProfilePage.scss\";\nimport { Component } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport Header from \"../../components/Header/Header\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass ProfilePage extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      user: null,\n      dog: null,\n      failedAuth: false\n    };\n\n    this.handleLogout = () => {\n      sessionStorage.removeItem(\"token\");\n      this.setState({\n        user: null,\n        failedAuth: true\n      });\n    };\n\n    this.addDogToPool = () => {\n      const {\n        owner_id,\n        dog_name,\n        photo,\n        id\n      } = this.state.dog;\n      const {\n        first_name,\n        last_name,\n        email,\n        phone_number,\n        address,\n        city\n      } = this.state.user;\n      const dogToPool = {\n        owner_id,\n        dog_id: id,\n        dog_name,\n        photo,\n        first_name,\n        last_name,\n        email,\n        phone_number,\n        address,\n        city\n      };\n      axios.post(API_URL + \"/pool\", dogToPool).then(res => {\n        console.log(res.data);\n      }).catch(err => console.log(err));\n    };\n\n    this.removeFromPool = () => {};\n  }\n\n  componentDidMount() {\n    const token = sessionStorage.getItem(\"token\");\n\n    if (!token) {\n      this.setState({\n        failedAuth: true\n      });\n      return;\n    }\n\n    axios.get(API_URL + \"/current\", {\n      headers: {\n        Authorization: \"Bearer \" + token\n      }\n    }).then(res => {\n      this.setState({\n        user: res.data.user,\n        dog: res.data.dog\n      });\n    }).catch(err => {\n      console.log(err);\n      this.setState({\n        failedAuth: true\n      });\n    });\n  }\n\n  render() {\n    if (this.state.failedAuth) {\n      return /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"profile\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"You must be logged in to see this page.\", \" \", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/login\",\n            children: \"Log in\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this);\n    }\n\n    if (!this.state.user || !this.state.dog) {\n      return /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"profile\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this);\n    }\n\n    const {\n      first_name\n    } = this.state.user;\n    const {\n      dog_name,\n      birthday,\n      dog_info,\n      photo\n    } = this.state.dog;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"profile\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile__welcome\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"\",\n            children: [\"Welcome back, \", first_name, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile__dog\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"dogs name: \", dog_name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"profile__dog-photo\",\n            src: photo,\n            alt: \"dog\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: dog_info\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile__status\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Do you need your dog walked today?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"profile__poolmydog-button\",\n            onClick: this.addDogToPool,\n            children: \"Pool My Dog\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"profile__remove-pool\",\n            onClick: this.removeFromPool,\n            children: \"remove\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"profile__logout\",\n            onClick: this.handleLogout,\n            children: \"Log out\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default ProfilePage;","map":{"version":3,"sources":["/Users/j/Desktop/Capstone/dog-pool/client/src/pages/ProfilePage/ProfilePage.jsx"],"names":["API_URL","Component","axios","Link","Header","ProfilePage","state","user","dog","failedAuth","handleLogout","sessionStorage","removeItem","setState","addDogToPool","owner_id","dog_name","photo","id","first_name","last_name","email","phone_number","address","city","dogToPool","dog_id","post","then","res","console","log","data","catch","err","removeFromPool","componentDidMount","token","getItem","get","headers","Authorization","render","birthday","dog_info"],"mappings":"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","sourcesContent":["import { API_URL } from \"../../App\";\nimport \"./ProfilePage.scss\";\nimport { Component } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport Header from \"../../components/Header/Header\";\n\nclass ProfilePage extends Component {\n  state = {\n    user: null,\n    dog: null,\n    failedAuth: false,\n  };\n\n  componentDidMount() {\n    const token = sessionStorage.getItem(\"token\");\n\n    if (!token) {\n      this.setState({ failedAuth: true });\n      return;\n    }\n\n    axios\n      .get(API_URL + \"/current\", {\n        headers: {\n          Authorization: \"Bearer \" + token,\n        },\n      })\n\n      .then((res) => {\n        this.setState({\n          user: res.data.user,\n          dog: res.data.dog,\n        });\n      })\n      .catch((err) => {\n        console.log(err);\n        this.setState({\n          failedAuth: true,\n        });\n      });\n  }\n\n  handleLogout = () => {\n    sessionStorage.removeItem(\"token\");\n    this.setState({\n      user: null,\n      failedAuth: true,\n    });\n  };\n\n  addDogToPool = () => {\n    const { owner_id, dog_name, photo, id } = this.state.dog;\n    const { first_name, last_name, email, phone_number, address, city } =\n      this.state.user;\n\n    const dogToPool = {\n      owner_id,\n      dog_id: id,\n      dog_name,\n      photo,\n      first_name,\n      last_name,\n      email,\n      phone_number,\n      address,\n      city,\n    };\n\n    axios\n      .post(API_URL + \"/pool\", dogToPool)\n      .then((res) => {\n        console.log(res.data);\n      })\n      .catch((err) => console.log(err));\n  };\n\n  removeFromPool = () => {};\n\n  render() {\n    if (this.state.failedAuth) {\n      return (\n        <main className=\"profile\">\n          <p>\n            You must be logged in to see this page.{\" \"}\n            <Link to=\"/login\">Log in</Link>\n          </p>\n        </main>\n      );\n    }\n\n    if (!this.state.user || !this.state.dog) {\n      return (\n        <main className=\"profile\">\n          <p>Loading...</p>\n        </main>\n      );\n    }\n\n    const { first_name } = this.state.user;\n    const { dog_name, birthday, dog_info, photo } = this.state.dog;\n    return (\n      <>\n        <Header />\n        <main className=\"profile\">\n          <div className=\"profile__welcome\">\n            <h1 className=\"\">Welcome back, {first_name} </h1>\n          </div>\n\n          <div className=\"profile__dog\">\n            <p>dogs name: {dog_name}</p>\n            <img className=\"profile__dog-photo\" src={photo} alt=\"dog\" />\n\n            <p>{dog_info}</p>\n          </div>\n\n          <div className=\"profile__status\">\n            <p>Do you need your dog walked today?</p>\n            {/* <Link to=\"/\"> */}\n            <button\n              className=\"profile__poolmydog-button\"\n              onClick={this.addDogToPool}\n            >\n              Pool My Dog\n            </button>\n            {/* </Link> */}\n\n            <button\n              className=\"profile__remove-pool\"\n              onClick={this.removeFromPool}\n            >\n              remove\n            </button>\n          </div>\n\n          <Link to=\"/login\">\n            <button className=\"profile__logout\" onClick={this.handleLogout}>\n              Log out\n            </button>\n          </Link>\n        </main>\n      </>\n    );\n  }\n}\n\nexport default ProfilePage;\n"]},"metadata":{},"sourceType":"module"}