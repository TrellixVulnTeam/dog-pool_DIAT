{"ast":null,"code":"var _jsxFileName = \"/Users/j/Desktop/Capstone/dog-pool/client/src/pages/ProfilePage/ProfilePage.jsx\";\nimport \"./ProfilePage.scss\";\nimport { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { API_URL } from \"../../App\";\nimport axios from \"axios\";\nimport Header from \"../../components/Header/Header\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass ProfilePage extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      user: null,\n      dog: null,\n      failedAuth: false\n    };\n\n    this.handleLogout = () => {\n      sessionStorage.removeItem(\"token\");\n      this.setState({\n        user: null,\n        failedAuth: true\n      });\n    };\n\n    this.addDogToPool = () => {\n      const {\n        owner_id,\n        dog_name,\n        photo,\n        id,\n        dog_info\n      } = this.state.dog;\n      const {\n        first_name,\n        last_name,\n        email,\n        phone_number,\n        address,\n        city\n      } = this.state.user;\n      const dogToPool = {\n        owner_id,\n        dog_id: id,\n        dog_name,\n        photo,\n        first_name,\n        last_name,\n        email,\n        phone_number,\n        address,\n        city,\n        dog_info\n      };\n      axios.post(API_URL + \"/pool\", dogToPool).then(res => {\n        console.log(res.data);\n      }).catch(err => console.log(err));\n    };\n\n    this.removeFromPool = () => {\n      axios.delete(API_URL + \"/pool/\" + this.state.dog.id).then(res => {\n        console.log(res.data);\n      }).catch(err => console.log(err));\n    };\n  }\n\n  componentDidMount() {\n    const token = sessionStorage.getItem(\"token\");\n\n    if (!token) {\n      this.setState({\n        failedAuth: true\n      });\n      return;\n    }\n\n    axios.get(API_URL + \"/user-routes/current\", {\n      headers: {\n        Authorization: \"Bearer \" + token\n      }\n    }).then(res => {\n      this.setState({\n        user: res.data.user,\n        dog: res.data.dog\n      });\n    }).catch(err => {\n      console.log(err);\n      this.setState({\n        failedAuth: true\n      });\n    });\n  }\n\n  render() {\n    if (this.state.failedAuth) {\n      return /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"profile\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"You must be logged in to see this page.\", \" \", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/login\",\n            children: \"Log in\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this);\n    }\n\n    if (!this.state.user || !this.state.dog) {\n      return /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"profile\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this);\n    }\n\n    const {\n      first_name\n    } = this.state.user;\n    const {\n      dog_name,\n      birthday,\n      dog_info,\n      photo\n    } = this.state.dog;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"profile\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile__welcome\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"profile__welcome\",\n            children: [\"Welcome back, \", first_name, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"profile__dog-photo\",\n          src: photo,\n          alt: \"dog\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile__status\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"profile__buttons-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile__text\",\n              children: [\"Do you need \", dog_name, \" walked today?\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"profile__poolmydog-button\",\n                onClick: this.addDogToPool,\n                children: \"Pool Me\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"profile__remove-pool\",\n              onClick: this.removeFromPool,\n              children: \"remove\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"profile__logout\",\n            onClick: this.handleLogout,\n            children: \"Log out\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default ProfilePage;","map":{"version":3,"sources":["/Users/j/Desktop/Capstone/dog-pool/client/src/pages/ProfilePage/ProfilePage.jsx"],"names":["Component","Link","API_URL","axios","Header","ProfilePage","state","user","dog","failedAuth","handleLogout","sessionStorage","removeItem","setState","addDogToPool","owner_id","dog_name","photo","id","dog_info","first_name","last_name","email","phone_number","address","city","dogToPool","dog_id","post","then","res","console","log","data","catch","err","removeFromPool","delete","componentDidMount","token","getItem","get","headers","Authorization","render","birthday"],"mappings":";AAAA,OAAO,oBAAP;AACA,SAASA,SAAT,QAA0B,OAA1B;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,OAAT,QAAwB,WAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAOC,MAAP,MAAmB,gCAAnB;;;;AAEA,MAAMC,WAAN,SAA0BL,SAA1B,CAAoC;AAAA;AAAA;AAAA,SAClCM,KADkC,GAC1B;AACNC,MAAAA,IAAI,EAAE,IADA;AAENC,MAAAA,GAAG,EAAE,IAFC;AAGNC,MAAAA,UAAU,EAAE;AAHN,KAD0B;;AAAA,SAoClCC,YApCkC,GAoCnB,MAAM;AACnBC,MAAAA,cAAc,CAACC,UAAf,CAA0B,OAA1B;AACA,WAAKC,QAAL,CAAc;AACZN,QAAAA,IAAI,EAAE,IADM;AAEZE,QAAAA,UAAU,EAAE;AAFA,OAAd;AAID,KA1CiC;;AAAA,SA4ClCK,YA5CkC,GA4CnB,MAAM;AACnB,YAAM;AAAEC,QAAAA,QAAF;AAAYC,QAAAA,QAAZ;AAAsBC,QAAAA,KAAtB;AAA6BC,QAAAA,EAA7B;AAAiCC,QAAAA;AAAjC,UAA8C,KAAKb,KAAL,CAAWE,GAA/D;AACA,YAAM;AAAEY,QAAAA,UAAF;AAAcC,QAAAA,SAAd;AAAyBC,QAAAA,KAAzB;AAAgCC,QAAAA,YAAhC;AAA8CC,QAAAA,OAA9C;AAAuDC,QAAAA;AAAvD,UACJ,KAAKnB,KAAL,CAAWC,IADb;AAGA,YAAMmB,SAAS,GAAG;AAChBX,QAAAA,QADgB;AAEhBY,QAAAA,MAAM,EAAET,EAFQ;AAGhBF,QAAAA,QAHgB;AAIhBC,QAAAA,KAJgB;AAKhBG,QAAAA,UALgB;AAMhBC,QAAAA,SANgB;AAOhBC,QAAAA,KAPgB;AAQhBC,QAAAA,YARgB;AAShBC,QAAAA,OATgB;AAUhBC,QAAAA,IAVgB;AAWhBN,QAAAA;AAXgB,OAAlB;AAcAhB,MAAAA,KAAK,CACFyB,IADH,CACQ1B,OAAO,GAAG,OADlB,EAC2BwB,SAD3B,EAEGG,IAFH,CAESC,GAAD,IAAS;AACbC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB;AACD,OAJH,EAKGC,KALH,CAKUC,GAAD,IAASJ,OAAO,CAACC,GAAR,CAAYG,GAAZ,CALlB;AAMD,KArEiC;;AAAA,SAuElCC,cAvEkC,GAuEjB,MAAM;AACrBjC,MAAAA,KAAK,CACFkC,MADH,CACUnC,OAAO,GAAG,QAAV,GAAqB,KAAKI,KAAL,CAAWE,GAAX,CAAeU,EAD9C,EAEGW,IAFH,CAESC,GAAD,IAAS;AACbC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB;AACD,OAJH,EAKGC,KALH,CAKUC,GAAD,IAASJ,OAAO,CAACC,GAAR,CAAYG,GAAZ,CALlB;AAMD,KA9EiC;AAAA;;AAOlCG,EAAAA,iBAAiB,GAAG;AAClB,UAAMC,KAAK,GAAG5B,cAAc,CAAC6B,OAAf,CAAuB,OAAvB,CAAd;;AAEA,QAAI,CAACD,KAAL,EAAY;AACV,WAAK1B,QAAL,CAAc;AAAEJ,QAAAA,UAAU,EAAE;AAAd,OAAd;AACA;AACD;;AAEDN,IAAAA,KAAK,CACFsC,GADH,CACOvC,OAAO,GAAG,sBADjB,EACyC;AACrCwC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAE,YAAYJ;AADpB;AAD4B,KADzC,EAOGV,IAPH,CAOSC,GAAD,IAAS;AACb,WAAKjB,QAAL,CAAc;AACZN,QAAAA,IAAI,EAAEuB,GAAG,CAACG,IAAJ,CAAS1B,IADH;AAEZC,QAAAA,GAAG,EAAEsB,GAAG,CAACG,IAAJ,CAASzB;AAFF,OAAd;AAID,KAZH,EAaG0B,KAbH,CAaUC,GAAD,IAAS;AACdJ,MAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;AACA,WAAKtB,QAAL,CAAc;AACZJ,QAAAA,UAAU,EAAE;AADA,OAAd;AAGD,KAlBH;AAmBD;;AA8CDmC,EAAAA,MAAM,GAAG;AACP,QAAI,KAAKtC,KAAL,CAAWG,UAAf,EAA2B;AACzB,0BACE;AAAM,QAAA,SAAS,EAAC,SAAhB;AAAA,+BACE;AAAA,gEAC0C,GAD1C,eAEE,QAAC,IAAD;AAAM,YAAA,EAAE,EAAC,QAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF;AAQD;;AAED,QAAI,CAAC,KAAKH,KAAL,CAAWC,IAAZ,IAAoB,CAAC,KAAKD,KAAL,CAAWE,GAApC,EAAyC;AACvC,0BACE;AAAM,QAAA,SAAS,EAAC,SAAhB;AAAA,+BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF;AAKD;;AAED,UAAM;AAAEY,MAAAA;AAAF,QAAiB,KAAKd,KAAL,CAAWC,IAAlC;AACA,UAAM;AAAES,MAAAA,QAAF;AAAY6B,MAAAA,QAAZ;AAAsB1B,MAAAA,QAAtB;AAAgCF,MAAAA;AAAhC,QAA0C,KAAKX,KAAL,CAAWE,GAA3D;AACA,wBACE;AAAA,8BACE,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAM,QAAA,SAAS,EAAC,SAAhB;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,kBAAf;AAAA,iCACE;AAAI,YAAA,SAAS,EAAC,kBAAd;AAAA,yCAAgDY,UAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eAIE;AAAK,UAAA,SAAS,EAAC,oBAAf;AAAoC,UAAA,GAAG,EAAEH,KAAzC;AAAgD,UAAA,GAAG,EAAC;AAApD;AAAA;AAAA;AAAA;AAAA,gBAJF,eAQE;AAAK,UAAA,SAAS,EAAC,iBAAf;AAAA,iCACE;AAAK,YAAA,SAAS,EAAC,4BAAf;AAAA,oCACE;AAAG,cAAA,SAAS,EAAC,eAAb;AAAA,yCACeD,QADf;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAIE,QAAC,IAAD;AAAM,cAAA,EAAE,EAAC,GAAT;AAAA,qCACE;AACE,gBAAA,SAAS,EAAC,2BADZ;AAEE,gBAAA,OAAO,EAAE,KAAKF,YAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAJF,eAaE;AACE,cAAA,SAAS,EAAC,sBADZ;AAEE,cAAA,OAAO,EAAE,KAAKsB,cAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAbF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBARF,eA+BE,QAAC,IAAD;AAAM,UAAA,EAAE,EAAC,QAAT;AAAA,iCACE;AAAQ,YAAA,SAAS,EAAC,iBAAlB;AAAoC,YAAA,OAAO,EAAE,KAAK1B,YAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBA/BF;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA,oBADF;AA0CD;;AAhJiC;;AAmJpC,eAAeL,WAAf","sourcesContent":["import \"./ProfilePage.scss\";\nimport { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { API_URL } from \"../../App\";\nimport axios from \"axios\";\n\nimport Header from \"../../components/Header/Header\";\n\nclass ProfilePage extends Component {\n  state = {\n    user: null,\n    dog: null,\n    failedAuth: false,\n  };\n\n  componentDidMount() {\n    const token = sessionStorage.getItem(\"token\");\n\n    if (!token) {\n      this.setState({ failedAuth: true });\n      return;\n    }\n\n    axios\n      .get(API_URL + \"/user-routes/current\", {\n        headers: {\n          Authorization: \"Bearer \" + token,\n        },\n      })\n\n      .then((res) => {\n        this.setState({\n          user: res.data.user,\n          dog: res.data.dog,\n        });\n      })\n      .catch((err) => {\n        console.log(err);\n        this.setState({\n          failedAuth: true,\n        });\n      });\n  }\n\n  handleLogout = () => {\n    sessionStorage.removeItem(\"token\");\n    this.setState({\n      user: null,\n      failedAuth: true,\n    });\n  };\n\n  addDogToPool = () => {\n    const { owner_id, dog_name, photo, id, dog_info } = this.state.dog;\n    const { first_name, last_name, email, phone_number, address, city } =\n      this.state.user;\n\n    const dogToPool = {\n      owner_id,\n      dog_id: id,\n      dog_name,\n      photo,\n      first_name,\n      last_name,\n      email,\n      phone_number,\n      address,\n      city,\n      dog_info,\n    };\n\n    axios\n      .post(API_URL + \"/pool\", dogToPool)\n      .then((res) => {\n        console.log(res.data);\n      })\n      .catch((err) => console.log(err));\n  };\n\n  removeFromPool = () => {\n    axios\n      .delete(API_URL + \"/pool/\" + this.state.dog.id)\n      .then((res) => {\n        console.log(res.data);\n      })\n      .catch((err) => console.log(err));\n  };\n\n  render() {\n    if (this.state.failedAuth) {\n      return (\n        <main className=\"profile\">\n          <p>\n            You must be logged in to see this page.{\" \"}\n            <Link to=\"/login\">Log in</Link>\n          </p>\n        </main>\n      );\n    }\n\n    if (!this.state.user || !this.state.dog) {\n      return (\n        <main className=\"profile\">\n          <p>Loading...</p>\n        </main>\n      );\n    }\n\n    const { first_name } = this.state.user;\n    const { dog_name, birthday, dog_info, photo } = this.state.dog;\n    return (\n      <>\n        <Header />\n        <main className=\"profile\">\n          <div className=\"profile__welcome\">\n            <h1 className=\"profile__welcome\">Welcome back, {first_name} </h1>\n          </div>\n          <img className=\"profile__dog-photo\" src={photo} alt=\"dog\" />\n          {/* <p className=\"profile__text profile__text--margin-bottom\">\n            {dog_info}\n          </p> */}\n          <div className=\"profile__status\">\n            <div className=\"profile__buttons-container\">\n              <p className=\"profile__text\">\n                Do you need {dog_name} walked today?\n              </p>\n              <Link to=\"/\">\n                <button\n                  className=\"profile__poolmydog-button\"\n                  onClick={this.addDogToPool}\n                >\n                  Pool Me\n                </button>\n              </Link>\n\n              <button\n                className=\"profile__remove-pool\"\n                onClick={this.removeFromPool}\n              >\n                remove\n              </button>\n            </div>\n          </div>\n\n          <Link to=\"/login\">\n            <button className=\"profile__logout\" onClick={this.handleLogout}>\n              Log out\n            </button>\n          </Link>\n        </main>\n      </>\n    );\n  }\n}\n\nexport default ProfilePage;\n"]},"metadata":{},"sourceType":"module"}